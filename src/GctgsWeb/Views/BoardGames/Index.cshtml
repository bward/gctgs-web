@using System.Threading.Tasks
@using GctgsWeb.Models
@using Microsoft.Extensions.Caching.Memory
@model IEnumerable<GctgsWeb.Models.BoardGame>
@inject IMemoryCache MemoryCache

@{
    ViewBag.Title = "Board Games";
}

<h2>Board Games</h2>

<p>
    <a asp-controller="BoardGames" asp-action="Create">Create New</a>
</p>

<table class="table">
    <tr>
        <th>Id</th>
        <th>Name</th>
        <th>Location</th>
        <th>Rating</th>
        <th>Picture</th>
    </tr>

    @{
        foreach (var item in Model)
        {
            var details = await item.BggDetails(MemoryCache);
            <tr>
                <td>
                    @item.Id
                </td>
                <td>
                    @item.Name
                </td>
                <td>
                    @item.Location
                </td>
                <td>
                    @details.Rating
                </td>
                <td>
                    <img src="@details.ThumbnailUrl"/>
                </td>
            </tr>
        }

    }
       
</table>